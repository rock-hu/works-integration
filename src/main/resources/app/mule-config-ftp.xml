<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:spring="http://www.springframework.org/schema/beans" xmlns:ajax="http://www.mulesoft.org/schema/mule/ajax"
	xmlns:ejb="http://www.mulesoft.org/schema/mule/ejb" xmlns:file="http://www.mulesoft.org/schema/mule/file"
	xmlns:ftp="http://www.mulesoft.org/schema/mule/ftp" xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns:https="http://www.mulesoft.org/schema/mule/https" xmlns:imap="http://www.mulesoft.org/schema/mule/imap"
	xmlns:imaps="http://www.mulesoft.org/schema/mule/imaps" xmlns:jbpm="http://www.mulesoft.org/schema/mule/jbpm"
	xmlns:jdbc="http://www.mulesoft.org/schema/mule/jdbc" xmlns:jetty="http://www.mulesoft.org/schema/mule/jetty"
	xmlns:jetty-ssl="http://www.mulesoft.org/schema/mule/jetty-ssl"
	xmlns:jms="http://www.mulesoft.org/schema/mule/jms" xmlns:jnp="http://www.mulesoft.org/schema/mule/jnp"
	xmlns:multicast="http://www.mulesoft.org/schema/mule/multicast"
	xmlns:pop3="http://www.mulesoft.org/schema/mule/pop3" xmlns:pop3s="http://www.mulesoft.org/schema/mule/pop3s"
	xmlns:quartz="http://www.mulesoft.org/schema/mule/quartz" xmlns:rmi="http://www.mulesoft.org/schema/mule/rmi"
	xmlns:servlet="http://www.mulesoft.org/schema/mule/servlet" xmlns:smtp="http://www.mulesoft.org/schema/mule/smtp"
	xmlns:smtps="http://www.mulesoft.org/schema/mule/smtps" xmlns:ssl="http://www.mulesoft.org/schema/mule/ssl"
	xmlns:tls="http://www.mulesoft.org/schema/mule/tls" xmlns:stdio="http://www.mulesoft.org/schema/mule/stdio"
	xmlns:tcp="http://www.mulesoft.org/schema/mule/tcp" xmlns:udp="http://www.mulesoft.org/schema/mule/udp"
	xmlns:vm="http://www.mulesoft.org/schema/mule/vm" xmlns:xmpp="http://www.mulesoft.org/schema/mule/xmpp"
	xmlns:annotations="http://www.mulesoft.org/schema/mule/annotations"
	xmlns:atom="http://www.mulesoft.org/schema/mule/atom" xmlns:boot="http://www.mulesoft.org/schema/mule/boot"
	xmlns:builders="http://www.mulesoft.org/schema/mule/builders"
	xmlns:client="http://www.mulesoft.org/schema/mule/client" xmlns:cxf="http://www.mulesoft.org/schema/mule/cxf"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:guice="http://www.mulesoft.org/schema/mule/guice" xmlns:ibeans="http://www.mulesoft.org/schema/mule/ibeans"
	xmlns:jaas="http://www.mulesoft.org/schema/mule/jaas" xmlns:jbossts="http://www.mulesoft.org/schema/mule/jbossts"
	xmlns:jersey="http://www.mulesoft.org/schema/mule/jersey" xmlns:json="http://www.mulesoft.org/schema/mule/json"
	xmlns:management="http://www.mulesoft.org/schema/mule/management"
	xmlns:ognl="http://www.mulesoft.org/schema/mule/ognl" xmlns:pgp="http://www.mulesoft.org/schema/mule/pgp"
	xmlns:rss="http://www.mulesoft.org/schema/mule/rss" xmlns:scripting="http://www.mulesoft.org/schema/mule/scripting"
	xmlns:spring-extras="http://www.mulesoft.org/schema/mule/spring-extras"
	xmlns:spring-security="http://www.mulesoft.org/schema/mule/spring-security"
	xmlns:sxc="http://www.mulesoft.org/schema/mule/sxc" xmlns:mule-xml="http://www.mulesoft.org/schema/mule/xml"
	xsi:schemaLocation="
        http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/3.3/mule.xsd
        http://www.mulesoft.org/schema/mule/ajax http://www.mulesoft.org/schema/mule/ajax/3.3/mule-ajax.xsd
        http://www.mulesoft.org/schema/mule/ejb http://www.mulesoft.org/schema/mule/ejb/3.3/mule-ejb.xsd
        http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/3.3/mule-file.xsd
        http://www.mulesoft.org/schema/mule/ftp http://www.mulesoft.org/schema/mule/ftp/3.3/mule-ftp.xsd
        http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/3.3/mule-http.xsd
        http://www.mulesoft.org/schema/mule/https http://www.mulesoft.org/schema/mule/https/3.3/mule-https.xsd
        http://www.mulesoft.org/schema/mule/imap http://www.mulesoft.org/schema/mule/imap/3.3/mule-imap.xsd
        http://www.mulesoft.org/schema/mule/imaps http://www.mulesoft.org/schema/mule/imaps/3.3/mule-imaps.xsd
        http://www.mulesoft.org/schema/mule/jbpm http://www.mulesoft.org/schema/mule/jbpm/3.3/mule-jbpm.xsd
        http://www.mulesoft.org/schema/mule/jdbc http://www.mulesoft.org/schema/mule/jdbc/3.3/mule-jdbc.xsd
        http://www.mulesoft.org/schema/mule/jetty http://www.mulesoft.org/schema/mule/jetty/3.3/mule-jetty.xsd
        http://www.mulesoft.org/schema/mule/jetty-ssl http://www.mulesoft.org/schema/mule/jetty-ssl/3.3/mule-jetty-ssl.xsd
        http://www.mulesoft.org/schema/mule/jms http://www.mulesoft.org/schema/mule/jms/3.3/mule-jms.xsd
        http://www.mulesoft.org/schema/mule/jnp http://www.mulesoft.org/schema/mule/jnp/3.3/mule-jnp.xsd
        http://www.mulesoft.org/schema/mule/multicast http://www.mulesoft.org/schema/mule/multicast/3.3/mule-multicast.xsd
        http://www.mulesoft.org/schema/mule/pop3 http://www.mulesoft.org/schema/mule/pop3/3.3/mule-pop3.xsd
        http://www.mulesoft.org/schema/mule/pop3s http://www.mulesoft.org/schema/mule/pop3s/3.3/mule-pop3s.xsd
        http://www.mulesoft.org/schema/mule/quartz http://www.mulesoft.org/schema/mule/quartz/3.3/mule-quartz.xsd
        http://www.mulesoft.org/schema/mule/rmi http://www.mulesoft.org/schema/mule/rmi/3.3/mule-rmi.xsd
        http://www.mulesoft.org/schema/mule/servlet http://www.mulesoft.org/schema/mule/servlet/3.3/mule-servlet.xsd
        http://www.mulesoft.org/schema/mule/smtp http://www.mulesoft.org/schema/mule/smtp/3.3/mule-smtp.xsd
        http://www.mulesoft.org/schema/mule/smtps http://www.mulesoft.org/schema/mule/smtps/3.3/mule-smtps.xsd
        http://www.mulesoft.org/schema/mule/ssl http://www.mulesoft.org/schema/mule/ssl/3.3/mule-ssl.xsd
        http://www.mulesoft.org/schema/mule/tls http://www.mulesoft.org/schema/mule/tls/3.3/mule-tls.xsd
        http://www.mulesoft.org/schema/mule/stdio http://www.mulesoft.org/schema/mule/stdio/3.3/mule-stdio.xsd
        http://www.mulesoft.org/schema/mule/tcp http://www.mulesoft.org/schema/mule/tcp/3.3/mule-tcp.xsd
        http://www.mulesoft.org/schema/mule/udp http://www.mulesoft.org/schema/mule/udp/3.3/mule-udp.xsd
        http://www.mulesoft.org/schema/mule/vm http://www.mulesoft.org/schema/mule/vm/3.3/mule-vm.xsd
        http://www.mulesoft.org/schema/mule/xmpp http://www.mulesoft.org/schema/mule/xmpp/3.3/mule-xmpp.xsd
        http://www.mulesoft.org/schema/mule/annotations http://www.mulesoft.org/schema/mule/annotations/3.3/mule-annotations.xsd
        http://www.mulesoft.org/schema/mule/atom http://www.mulesoft.org/schema/mule/atom/3.3/mule-atom.xsd
        http://www.mulesoft.org/schema/mule/boot http://www.mulesoft.org/schema/mule/boot/3.3/mule-boot.xsd
        http://www.mulesoft.org/schema/mule/builders http://www.mulesoft.org/schema/mule/builders/3.3/mule-builders.xsd
        http://www.mulesoft.org/schema/mule/client http://www.mulesoft.org/schema/mule/client/3.3/mule-client.xsd
        http://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/3.3/mule-cxf.xsd
        http://www.mulesoft.org/schema/mule/guice http://www.mulesoft.org/schema/mule/guice/3.3/mule-guice.xsd
        http://www.mulesoft.org/schema/mule/ibeans http://www.mulesoft.org/schema/mule/ibeans/3.3/mule-ibeans.xsd
        http://www.mulesoft.org/schema/mule/jaas http://www.mulesoft.org/schema/mule/jaas/3.3/mule-jaas.xsd
        http://www.mulesoft.org/schema/mule/jbossts http://www.mulesoft.org/schema/mule/jbossts/3.3/mule-jbossts.xsd
        http://www.mulesoft.org/schema/mule/jersey http://www.mulesoft.org/schema/mule/jersey/3.3/mule-jersey.xsd
        http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/3.3/mule-json.xsd
        http://www.mulesoft.org/schema/mule/management http://www.mulesoft.org/schema/mule/management/3.3/mule-management.xsd
        http://www.mulesoft.org/schema/mule/ognl http://www.mulesoft.org/schema/mule/ognl/3.3/mule-ognl.xsd
        http://www.mulesoft.org/schema/mule/pgp http://www.mulesoft.org/schema/mule/pgp/3.3/mule-pgp.xsd
        http://www.mulesoft.org/schema/mule/rss http://www.mulesoft.org/schema/mule/rss/3.3/mule-rss.xsd
        http://www.mulesoft.org/schema/mule/scripting http://www.mulesoft.org/schema/mule/scripting/3.3/mule-scripting.xsd
        http://www.mulesoft.org/schema/mule/spring-extras http://www.mulesoft.org/schema/mule/spring-extras/3.3/mule-spring-extras.xsd
        http://www.mulesoft.org/schema/mule/spring-security http://www.mulesoft.org/schema/mule/spring-security/3.3/mule-spring-security.xsd
        http://www.mulesoft.org/schema/mule/sxc http://www.mulesoft.org/schema/mule/sxc/3.3/mule-sxc.xsd
        http://www.mulesoft.org/schema/mule/xml http://www.mulesoft.org/schema/mule/xml/3.3/mule-xml.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd">


	<notifications dynamic="true">
		<notification event="ENDPOINT-MESSAGE" />
	</notifications>



	<ftp:connector name="ftpConnector" binary="true"
		pollingFrequency="5000" validateConnections="true"
		connectionFactoryClass="org.mule.transport.ftp.FtpConnectionFactory" />


	<file:connector name="ftpFileConnector" pollingFrequency="6000" />


	<flow name="ftpDownloadFlow">
		<ftp:inbound-endpoint user="${ftp.user}" password="${ftp.password}" host="${ftp.host}" port="${ftp.port}"
			path="${ftp.download.path}" pollingFrequency="${ftp.freq}" connector-ref="ftpConnector">
			<file:filename-wildcard-filter pattern="*.csv" caseSensitive="false"/>
		</ftp:inbound-endpoint>
<!-- 		 <component> -->
<!--             <singleton-object class="org.mule.tck.functional.FunctionalStreamingTestComponent"/> -->
<!--         </component> -->
		<file:outbound-endpoint path="${local.download.path}" 
			connector-ref="ftpFileConnector" />
			<!-- outputPattern="[header:originalFilename]" -->
<!-- 		<custom-exception-strategy class="org.mule.exception.DefaultMessagingExceptionStrategy"/> -->
	</flow>


	<flow name="ftpUploadFlow">
		<file:inbound-endpoint path="${local.upload.path}" connector-ref="ftpFileConnector">
		</file:inbound-endpoint>
		<ftp:outbound-endpoint host="${ftp.host}" port="${ftp.port}" user="${ftp.user}" password="${ftp.password}"
			path="${ftp.upload.path}" connector-ref="ftpConnector" />
	</flow>
</mule>