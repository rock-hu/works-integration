<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:si="http://www.springframework.org/schema/integration"
	xmlns:si-file="http://www.springframework.org/schema/integration/file"
	xmlns:si-mail="http://www.springframework.org/schema/integration/mail"
	xmlns:si-stream="http://www.springframework.org/schema/integration/stream"
	xmlns:jms="http://www.springframework.org/schema/jms" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
			http://www.springframework.org/schema/integration
			http://www.springframework.org/schema/integration/spring-integration-2.2.xsd
			http://www.springframework.org/schema/integration/mail
			http://www.springframework.org/schema/integration/mail/spring-integration-mail-2.2.xsd
			http://www.springframework.org/schema/integration/file
			http://www.springframework.org/schema/integration/file/spring-integration-file-2.2.xsd
			http://www.springframework.org/schema/integration/stream
			http://www.springframework.org/schema/integration/stream/spring-integration-stream-2.2.xsd
			http://www.springframework.org/schema/jms 
			http://www.springframework.org/schema/jms/spring-integration-jms-2.2.xsd">

	<channel id="jmsReplies">
		<queue />
	</channel>

	<channel id="toJMS" />

	<channel id="fromJMS">
		<queue />
	</channel>

	<jms:listener-container>
		<jms:listener destination="siia.mdp.queue" ref="greeter"
			method="sayHello" />
	</jms:listener-container>

	<bean id="greeter" class="siia.jms.Greeter" />

	<jms:outbound-gateway request-channel="toJMS"
		reply-channel="jmsReplies" request-destination-name="siia.gateways.echo" />

	<jms:inbound-gateway request-channel="fromJMS"
		request-destination-name="siia.gateways.echo" />

	<service-activator input-channel="fromJMS" method="exclaim">
		<beans:bean class="siia.jms.Exclaimer" />
	</service-activator>


	<jms:outbound-channel-adapter channel="toJMS"
		destination-name="siia.adapters.echo" />

	<jms:message-driven-channel-adapter
		channel="fromJMS" destination-name="siia.adapters.echo" />

</beans>